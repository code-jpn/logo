<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<title>logo.png</title>
	<style>body{opacity:.1}</style>
</head>
<body>
	<svg viewBox="0 0 120 120" data-type0>
		<path d="m -8,82 c 0,0 10,-9 24,-9 14,0 42,15 42,15 0,0 24,15 39,15 C 112,103 130,91 130,91 l 0,14 c 0,0 -21,9 -33,9 -12,0 -38,-12 -38,-12 0,0 -33,-18 -44,-18 -12,0 -23,10 -23,10 z"></path>
		<text class="text" y="55" x="59" lengthAdjust="spacingAndGlyphs" textLength="90%">空想</text>
		<text class="text name" y="108" x="59" lengthAdjust="spacingAndGlyphs" textLength="90%"></text>
		<style>
			@import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Mochiy+Pop+P+One&family=Noto+Sans+JP:wght@100..900&display=swap');
		    .text{fill:#fff;font-family:'ヒラギノ角ゴ ProN','モリサワ新ゴ','Noto Sans JP';font-weight:bold;letter-spacing:-0.05em;font-size:350%;text-anchor:middle}
	　　</style>
	</svg>
	<svg viewBox="0 0 120 120" data-type1>
		<path d="M 113,47 85,73 91,110 58,92 24,109 31,72 4,45 42,40 59,6 75,40 Z"></path>
		<text class="text2 name" y="56" x="60" lengthAdjust="spacingAndGlyphs" textLength="88%"></text>
		<text class="text2" y="108" x="61" lengthAdjust="spacingAndGlyphs" textLength="93%">くらぶ</text>
		<style>
			@import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Mochiy+Pop+P+One&family=Noto+Sans+JP:wght@100..900&display=swap');
			.text2{fill:#fff;font-family:'Mochiy Pop P One';letter-spacing:-0.05em;font-size:345%;text-anchor:middle}
	　　</style>
	</svg>
	<svg viewBox="0 0 120 120" data-type2>
		<path d="M 60,12 108,60 60,108 12,60 Z"></path>
		<text class="text3 name" y="51" x="61.5" lengthAdjust="spacingAndGlyphs" textLength="90%"></text>
		<text class="text3" y="102" x="34.5" lengthAdjust="spacingAndGlyphs" textLength="46%">都</text>
		<text class="text4" y="84" x="88.5" lengthAdjust="spacingAndGlyphs" textLength="46%">ふぁ</text>
		<text class="text4" y="106.5" x="91.5" lengthAdjust="spacingAndGlyphs" textLength="25%">ん</text>
		<style>
			@import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Mochiy+Pop+P+One&family=Noto+Sans+JP:wght@100..900&display=swap');
			.text3{fill:#fff;font-family:'HG丸ｺﾞｼｯｸM-PRO','Kosugi Maru';letter-spacing:0.04em;font-size:300%;text-anchor:middle}
			.text4{fill:#fff;font-family:'HG丸ｺﾞｼｯｸM-PRO','Kosugi Maru';letter-spacing:0.01em;font-size:150%;text-anchor:middle}
	　　</style>
	</svg>
	<script>
	    const params = new URLSearchParams(window.location.search);
		const set = params.get('t');
		const logo = document.querySelector(`svg[data-type${set}]`);
		const deco = logo.getElementsByTagName('path');
		const name = logo.getElementsByClassName('name');
		for (let i = 0; i < deco.length; i++) {deco[i].style.fill = params.get('d');}
		for (let i = 0; i < name.length; i++) {name[i].textContent = params.get('n');}
		document.fonts.ready.then(() => {
			const svgData = new XMLSerializer().serializeToString(logo);
		    const svgBlob = new Blob([svgData], { type: "image/svg+xml;charset=utf-8" });
			const url = URL.createObjectURL(svgBlob);				  const img = new Image();
			setTimeout(() => {img.src = url},500);
			img.onload = function () {
				const canvas = document.createElement("canvas");
				const bbox = logo.getBoundingClientRect();
				canvas.width = bbox.width;
				canvas.height = bbox.height;
		        const ctx = canvas.getContext("2d");
				ctx.fillStyle = params.get('b') || '#000';
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				ctx.drawImage(img, 0, 0, canvas.width, canvas.height)
				const pngUrl = canvas.toDataURL("image/png");
			    const a = document.createElement("a");
			    a.href = pngUrl;
				a.download = "image.png";
			    a.click();
			}
		});
			// const back = document.createElement('a');
			// back.href = 'memo.zu-ga.net';
			// back.click();
	</script>
</body>
</html>
